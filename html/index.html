<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="./cu.css" />
    <title>Document</title>
  </head>
  <body>
    <div  id="bordaextra">
      <div id="paredeesq"></div>
      <div id="paredecima"></div>
      <div id="parededir"></div>
      <div class="info">
      <div id="vida">VIDA: </div>
      <div id="pontos">PONTOS: </div>
    </div>
      <div class="bordas" id="bordas">
        <div id="personagem"></div>
      </div>
    </div>
    <div class="controles">
      <button type="button" id="cima">▲</button><br />
      <button type="button" id="esquerda">◄</button>
      <button type="button" id="direita">►</button><br />
      <button type="button" id="baixo">▼</button>
    </div>
    <script>
      let cima = document.querySelector("#cima");
      let esquerda = document.querySelector("#esquerda");
      let direita = document.querySelector("#direita");
      let baixo = document.querySelector("#baixo");
      let bordas = document.querySelector("#bordas");
      let bordaextra = document.querySelector("#bordaextra")
      let paredeesq = document.querySelector("#paredeesq")
      let projeti1width
      let intervaldireita;
      let intervalesquerda;
      let intervalcima;
      let intervalbaixo;
      let personagem = document.querySelector("#personagem");
      let vida = 100;
      let pontos = 0;
      let atk1 = []
      let i = 0
      if (window.innerWidth >= 600){
      personagem.style.left = "26vh";
      personagem.style.top = "27vh"
      personagem.style.width = "3vh";
      personagem.style.height = "3vh";
      bordas.style.width = "55vh";
      bordas.style.height = "55vh";
      paredeesq.style.width = "3.3vh";
      bordaextra.style.width = "62vh";
      bordaextra.style.height = "65vh";
      projetil1width = 3; 
      }
      else{
      personagem.style.left = "18vh";
      personagem.style.top = "19vh"
      personagem.style.width = "2vh";
      personagem.style.height = "2vh";
      bordas.style.width = "38vh";
      bordas.style.height = "38vh";
      paredeesq.style.width = "2.4vh";
      bordaextra.style.width = "43vh";
      bordaextra.style.height = "46vh";
      projetil1width = 2; 
      }
      //FUNÇAO DIREITA---------------------------------------------------------------------------------------
      function vaipradireita() {
        if (parseFloat(personagem.style.left) + parseFloat(personagem.style.width) < parseFloat(bordas.style.width) && vida > 0) {
          personagem.style.left = parseFloat(personagem.style.left) + 0.5 + "vh";
        }
        direita.addEventListener("mouseout",()=>{
          clearInterval(intervaldireita)
        })
      }
      //FUNÇAO ESQUERDA---------------------------------------------------------------------------------------
      function vaipraesquerda() {
        if (parseFloat(personagem.style.left) > 0 && vida > 0) {
          personagem.style.left = parseFloat(personagem.style.left) - 0.5 + "vh";
        }
        esquerda.addEventListener("mouseout",()=>{
          clearInterval(intervalesquerda)
        })
      }
      //FUNÇAO CIMA---------------------------------------------------------------------------------------
      function vaipracima() {
        if (parseFloat(personagem.style.top) > 0 && vida > 0) {
          personagem.style.top = parseFloat(personagem.style.top) - 0.5 + "vh";
        }
        cima.addEventListener("mouseout",()=>{
          clearInterval(intervalcima)
        })
      }
      //FUNÇAO BAIXO---------------------------------------------------------------------------------------
      function vaiprabaixo() {
        if (parseFloat(personagem.style.top) + parseFloat(personagem.style.width) < parseFloat(bordas.style.height) && vida > 0) {
          personagem.style.top = parseFloat(personagem.style.top) + 0.5 + "vh";
        }
        baixo.addEventListener("mouseout",()=>{
          clearInterval(intervalbaixo)
        })
      }
      //DIREITA---------------------------------------------------------------------------------------
      direita.addEventListener("mousedown", () => {
        intervaldireita = setInterval(vaipradireita, 12);
      });
      direita.addEventListener("mouseup", () => {
        clearInterval(intervaldireita);
      });
      direita.addEventListener("touchstart", () => {
        intervaldireita = setInterval(vaipradireita, 12);
      });
      direita.addEventListener("touchend", () => {
        clearInterval(intervaldireita);
      });

      //ESQUERDA---------------------------------------------------------------------------------------
      esquerda.addEventListener("mousedown", () => {
        intervalesquerda = setInterval(vaipraesquerda, 12);
      });
      esquerda.addEventListener("mouseup", () => {
        clearInterval(intervalesquerda);
      });
      esquerda.addEventListener("touchstart", () => {
        intervalesquerda = setInterval(vaipraesquerda, 12);
      });
      esquerda.addEventListener("touchend", () => {
        clearInterval(intervalesquerda);
      });

      //CIMA---------------------------------------------------------------------------------------
      cima.addEventListener("mousedown", () => {
        intervalcima = setInterval(vaipracima, 12);
      });
      cima.addEventListener("mouseup", () => {
        clearInterval(intervalcima);
      });
      cima.addEventListener("touchstart", () => {
        intervalcima = setInterval(vaipracima, 12);
      });
      cima.addEventListener("touchend", () => {
        clearInterval(intervalcima);
      });

      //BAIXO---------------------------------------------------------------------------------------
      baixo.addEventListener("mousedown", () => {
        intervalbaixo = setInterval(vaiprabaixo, 12);
      });
      baixo.addEventListener("mouseup", () => {
        clearInterval(intervalbaixo);
      });
      baixo.addEventListener("touchstart", () => {
        intervalbaixo = setInterval(vaiprabaixo, 12);
      });
      baixo.addEventListener("touchend", () => {
        clearInterval(intervalbaixo);
      });
      let a
     function criataque(){
      atk1[i] = document.createElement("div");
      atk1[i].setAttribute("id","projetil1");
      atk1[i].style.left =  Math.random() * (parseFloat(bordaextra.style.width) - (parseFloat(paredeesq.style.width) * 2) - projetil1width) + parseFloat(paredeesq.style.width) + "vh";
      bordaextra.appendChild(atk1[i]);
      removeataque()
      i++
     }
     function removeataque(){
      setTimeout(()=>{
      atk1.shift().remove()
      i--
      },3500)

     }

     setInterval(criataque,270)

    </script>
  </body>
</html>
